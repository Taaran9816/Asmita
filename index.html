<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asmita Store</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<style>
  :root{--cream:#faf7f2;--dark:#1a1208;--rust:#c45c2a;--gold:#d4a843;--sage:#7a8c6e;--warm-gray:#9e9087;--card-bg:#fff9f3;--esewa:#60BB46;--esewa-dark:#3d8a2a;}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--dark);min-height:100vh;}
  header{background:var(--dark);color:var(--cream);padding:0 2rem;display:flex;align-items:center;justify-content:space-between;height:70px;box-shadow:0 2px 20px rgba(0,0,0,0.3);position:sticky;top:0;z-index:100;}
  .logo{font-family:'Playfair Display',serif;font-size:1.8rem;letter-spacing:0.05em;color:var(--gold);}
  .logo span{font-style:italic;color:var(--cream);font-size:0.9rem;display:block;font-weight:300;margin-top:-6px;}
  nav{display:flex;gap:2rem;align-items:center;}
  nav a{color:var(--cream);text-decoration:none;font-size:0.85rem;opacity:0.75;transition:opacity 0.2s;}
  nav a:hover{opacity:1;}
  .cart-btn{background:var(--rust);color:white;border:none;padding:0.5rem 1.2rem;border-radius:30px;cursor:pointer;display:flex;align-items:center;gap:0.5rem;}
  .cart-count{background:var(--gold);color:var(--dark);border-radius:50%;width:20px;height:20px;font-size:0.75rem;font-weight:700;display:flex;align-items:center;justify-content:center;}
  /* Cart Sidebar */
  #cartSidebar{position:fixed;top:0;right:-400px;width:350px;height:100vh;background:white;box-shadow:-5px 0 25px rgba(0,0,0,0.2);transition:right 0.3s;z-index:200;padding:2rem;overflow-y:auto;}
  #cartSidebar h2{margin-bottom:1rem;}
  #cartSidebar hr{margin:1rem 0;}
  #cartSidebar button{margin-top:0.5rem;width:100%;padding:0.8rem;border:none;border-radius:30px;cursor:pointer;font-size:1rem;}
</style>
</head>
<body>

<header>
  <div class="logo">Asmita<span>Curated Collection</span></div>
  <nav><a href="#">Home</a><a href="#">New Arrivals</a><a href="#">Sale</a></nav>
  <button class="cart-btn" onclick="toggleCart()">üõçÔ∏è Cart <div class="cart-count" id="cartCount">0</div></button>
</header>

<main>
  <h1 style="padding:2rem;">Welcome to Asmita Store</h1>
  <button onclick="addToCart('Test Product',100)">Add Test Product</button>
</main>

<!-- Cart Sidebar -->
<div id="cartSidebar">
  <h2>Your Cart üõí</h2>
  <div id="cartItems"></div>
  <hr>
  <div style="display:flex;justify-content:space-between;font-weight:600;font-size:1.1rem;">
    <span>Total:</span>
    <span id="cartTotal">Rs. 0</span>
  </div>
  <button onclick="checkout()" style="background:var(--esewa);color:white;">Checkout via eSewa</button>
  <button onclick="toggleCart()" style="background:#ccc;color:black;">Close</button>
</div>

<script>
  // Cart toggle
  function toggleCart(){
    const sidebar = document.getElementById('cartSidebar');
    sidebar.style.right = (sidebar.style.right==='0px') ? '-400px' : '0px';
  }

  // Cart logic
  let cart = [];
  function addToCart(name,price){
    const item = {name, price, qty:1};
    const existing = cart.find(i=>i.name===name);
    if(existing){ existing.qty++; } else { cart.push(item); }
    renderCart();
  }

  function renderCart(){
    const cartItems = document.getElementById('cartItems');
    cartItems.innerHTML='';
    let total=0;
    cart.forEach((i,idx)=>{
      const div = document.createElement('div');
      div.style.marginBottom='0.5rem';
      div.innerHTML=`${i.name} x ${i.qty} - Rs.${i.price*i.qty} <button onclick="removeCartItem(${idx})">‚ùå</button>`;
      cartItems.appendChild(div);
      total += i.price*i.qty;
    });
    document.getElementById('cartTotal').textContent = 'Rs. '+total;
    document.getElementById('cartCount').textContent = cart.length;
  }

  function removeCartItem(idx){
    cart.splice(idx,1);
    renderCart();
  }

  function checkout(){
    if(cart.length===0){ alert('Cart is empty'); return; }
    const orderItems = cart.map(i=>`${i.name} x ${i.qty} - Rs.${i.price*i.qty}`).join('\n');
    const totalAmount = cart.reduce((sum,i)=>sum+i.price*i.qty,0);

    // EmailJS setup
    emailjs.init('YOUR_PUBLIC_KEY'); // Replace with your EmailJS public key
    emailjs.send('YOUR_SERVICE_ID','YOUR_TEMPLATE_ID',{
      customer_name:'Test Customer',
      customer_phone:'9812345678',
      customer_email:'test@gmail.com',
      customer_address:'Kathmandu',
      txn_ref:'ABC123',
      order_items:orderItems,
      total_amount:'Rs. '+totalAmount,
      order_time: new Date().toLocaleString()
    }).then(res=>{
      alert('Order sent to store!');
      cart=[];
      renderCart();
      toggleCart();
    }).catch(err=>{
      alert('Failed to send order. Check EmailJS config.');
      console.error(err);
    });
  }
</script>

</body>
</html>
